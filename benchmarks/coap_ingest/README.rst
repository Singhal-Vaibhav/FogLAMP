PERFORMANCE TESTING OF FogLAMP COAP Server
------------------------------------------

This suite measures the coap server ingest performance.
It has the following components:

1. Load Generator : That generates a burst of messages and sends it to FogLAMP coap server. Type of message to be sent and desired load are configurable.

2. Perf Stat Generator: This components reports for the CPU and Memory of FogLAMP coap server at regular intervals and writes these performance stats in coap_ingest/perf.log file

3. Stats collector: This component runs after the test is done, based on the stats and logs generated by various components, Stats Collector generates csv reports that can be analysed later

4. test_coap_ingest : This is the file that governs the functionality of complete package, starting, stopping the various components, with different configuration

Setup:
======

Machine 1 (Load_Generator_Machine) : CPU machine with good processing speed anf good RAM.

Components running:

* Load Generator
* Stats Collector
* test_coap_ingest

Machine 2 (Actual_Device) : Machine on which Application Under Test in running.

Components running:

* FogLAMP COAP
* Perf Stat Generator


Assumptions:
============

Datetime of Machine 1 and Machine 2 should be same.

Tests:
======

As these tests are still under development, following steps need to be performed manually:

**Pre-reuisites:**

Set the loads, wait time in test_coap_ingest file.

**Steps (Manual)**

1. Start the FogLAMP COAP server on Machine 1 [(classic) user $ python3 -m foglamp.device].

2. Start the Perf Stat Generator on Machine 1 [(classic) user $ python3 perf_stat_generator.py].

3. Start the test on Machine 2 [user2 $ python3 test_coap_ingest]

4. After tests are done, Step 3 returns back to console. Stop the FogLAMP COAP server and Perf Stat Generator.

5. Copy the log generated by FogLAMP COAP server, src/python/perf.log on Machine 1 to benchmarks/coap_ingest/device_log of Machine 2

6. Start Stats Collector on Machine 2 [user $ python3 stats_collector.py]

Results:
========

Following two files are generated:

1. latency.csv : Reports different timestamp and latencies between intra process communication.

2. cpu.csv : Reports the max. FogLAMP COAP Server CPU% under different loads.

